import{a as Q,c as _}from"./chunk-TMQEY75P.js";import"./chunk-GX5EWQQM.js";import{a as A,b as H,e as q,g as b}from"./chunk-M7IKT5IS.js";import{c as J,d as R,e as W}from"./chunk-DB7IGAXR.js";import{h as N,i as z,j as B,k as L,l as U}from"./chunk-YWHE27JH.js";import{$a as I,Ja as j,La as v,Na as a,Oa as r,Pa as C,Q as w,Sa as y,V as O,Va as d,Wa as m,Xa as o,Ya as x,Za as E,_ as p,ab as P,bb as T,db as g,fb as F,gb as V,hb as D,ia as u,ja as h,xa as l,ya as f}from"./chunk-ESKPFVMM.js";import"./chunk-X6YOYRVK.js";var M=(()=>{let t=class t{constructor(n){this.database=n,this.bd="tp01_mensajes"}enviarMensaje(n,e){this.database.insertar({emisor:n,texto:e,fechaEnvio:new Date().toISOString()},this.bd)}traerTodos(){return this.database.traerTodos(this.bd)}static ordenarPorFecha(n){return n.sort((e,c)=>{let k=new Date(e.fechaEnvio),K=new Date(c.fechaEnvio);return k.getTime()-K.getTime()})}};t.\u0275fac=function(e){return new(e||t)(O(Q))},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var $=(i,t)=>({"mensaje-enviado":i,"mensaje-recibido":t});function ee(i,t){if(i&1){let s=y();a(0,"div",2)(1,"button",3),d("click",function(){u(s);let e=m();return h(e.mostrarChat())}),o(2,"Mostrar Chat"),r()()}}function te(i,t){if(i&1&&(a(0,"div",12)(1,"div",13)(2,"span",14),o(3),C(4,"br"),o(5),V(6,"date"),r(),a(7,"p",15),o(8),r()()()),i&2){let s=t.$implicit,n=m(2);v("ngClass",F(7,$,n.emailUsuario===s.emisor,n.emailUsuario!==s.emisor)),l(3),x(s.emisor),l(2),E(" ",D(6,4,s.fechaEnvio,"dd/MM/yyyy HH:mm"),""),l(3),x(s.texto)}}function ne(i,t){if(i&1){let s=y();a(0,"div",4)(1,"div",5),o(2," Chat "),a(3,"button",6),d("click",function(){u(s);let e=m();return h(e.ocultarChat())}),o(4,"X"),r()(),a(5,"div",7)(6,"div",8),j(7,te,9,10,"div",9),r()(),a(8,"div",10)(9,"input",11),T("ngModelChange",function(e){u(s);let c=m();return P(c.inputMensaje,e)||(c.inputMensaje=e),h(e)}),d("keydown.enter",function(){u(s);let e=m();return h(e.enviarMensaje())}),r(),a(10,"button",3),d("click",function(){u(s);let e=m();return h(e.enviarMensaje())}),o(11,"Enviar"),r()()()}if(i&2){let s=m();l(7),v("ngForOf",s.listaMensajes),l(2),I("ngModel",s.inputMensaje)}}var X=(()=>{let t=class t{constructor(n,e){this.usuarioService=n,this.chatService=e,this.listaMensajes=[],this.inputMensaje="",this.emailUsuario="",this.estadoMostrar=!1,this.emailUsuario=this.usuarioService.getEmail(),this.actualizarChat()}ngOnInit(){}enviarMensaje(){this.inputMensaje!==""&&(this.chatService.enviarMensaje(this.emailUsuario,this.inputMensaje),this.actualizarChat(),this.inputMensaje="")}mostrarChat(){this.estadoMostrar=!0,this.actualizarScroll()}ocultarChat(){this.estadoMostrar=!1}actualizarChat(){this.chatService.traerTodos()?.subscribe(n=>{this.listaMensajes=M.ordenarPorFecha(n),this.actualizarScroll()})}actualizarScroll(){setTimeout(()=>{let n=document.getElementsByClassName("mensaje"),e=n[n.length-1];e&&(document.getElementById("mensajes-container").scrollTop=e.offsetTop)},20)}};t.\u0275fac=function(e){return new(e||t)(f(_),f(M))},t.\u0275cmp=p({type:t,selectors:[["app-chat"]],standalone:!0,features:[g],decls:2,vars:2,consts:[["class","chat-button",4,"ngIf"],["class","chat-container card text-center",4,"ngIf"],[1,"chat-button"],[1,"btn","btn-success",3,"click"],[1,"chat-container","card","text-center"],[1,"card-header"],[1,"btn","btn-danger",3,"click"],[1,"card-body"],["id","mensajes-container",1,"mensajes-container"],["class","mensaje",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-footer"],["type","text","placeholder","Ingresa tu mensaje",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],[1,"mensaje",3,"ngClass"],[1,"mensaje-contenido"],[1,"mensaje-informacion"],[1,"mensaje-texto"]],template:function(e,c){e&1&&j(0,ee,3,0,"div",0)(1,ne,12,2,"div",1),e&2&&(v("ngIf",!c.estadoMostrar),l(),v("ngIf",c.estadoMostrar))},dependencies:[b,A,H,q,U,N,z,B,L],styles:[".chat-button[_ngcontent-%COMP%]{position:fixed;z-index:9999;bottom:50px;right:50px}.chat-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50px;border:solid 2px #ffffff}.chat-container[_ngcontent-%COMP%]{position:fixed;z-index:9999;width:350px;right:50px;bottom:50px}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:60px}.card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:5px;width:40px;height:40px;border-radius:50px;border:solid 2px #ffffff}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:70px}.mensajes-container[_ngcontent-%COMP%]{height:350px;overflow:scroll}.mensajes-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.mensaje[_ngcontent-%COMP%]{margin:5px 0;border-radius:25px}.mensaje-contenido[_ngcontent-%COMP%]{display:inline-block;padding:10px}.mensaje-enviado[_ngcontent-%COMP%]{display:block;float:right;background-color:#dcf8c6;text-align:right}.mensaje-recibido[_ngcontent-%COMP%]{display:block;float:left;background-color:#e4e4e4;text-align:left}.mensaje-informacion[_ngcontent-%COMP%]{font-size:12px;color:#777}.mensaje-texto[_ngcontent-%COMP%]{min-width:200px;max-width:200px;margin-bottom:2px;word-wrap:break-word}"]});let i=t;return i})();var G=(()=>{let t=class t{constructor(n,e){this.router=n,this.usuarioService=e,this.email="",this.email=this.usuarioService.getEmail()}ngOnInit(){}cerrarSesion(){this.usuarioService.cerrarSesion().then(n=>{this.router.navigateByUrl("/iniciar-sesion")}).catch(n=>console.log(n))}};t.\u0275fac=function(e){return new(e||t)(f(R),f(_))},t.\u0275cmp=p({type:t,selectors:[["app-nav-bar"]],standalone:!0,features:[g],decls:25,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark"],[1,"container-fluid"],["routerLink","/home/info-usuario",1,"navbar-brand"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/home/juego-uno",1,"nav-link"],["aria-current","page","routerLink","/home/juego-dos",1,"nav-link"],["aria-current","page","routerLink","/home/juego-tres",1,"nav-link"],["aria-current","page","routerLink","/home/juego-cuatro",1,"nav-link"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],["routerLink","/home/quien-soy",1,"nav-link"],["href","#",1,"nav-link",3,"click"]],template:function(e,c){e&1&&(a(0,"nav",0)(1,"div",1)(2,"a",2),o(3),r(),a(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),o(8,"Juego 1"),r()(),a(9,"li",5)(10,"a",7),o(11,"Juego 2"),r()(),a(12,"li",5)(13,"a",8),o(14,"Juego 3"),r()(),a(15,"li",5)(16,"a",9),o(17,"Juego 4"),r()()(),a(18,"ul",10)(19,"li",5)(20,"a",11),o(21,"\xBFQui\xE9n soy?"),r()(),a(22,"li",5)(23,"a",12),d("click",function(){return c.cerrarSesion()}),o(24,"Cerrar Sesi\xF3n"),r()()()()()()),e&2&&(l(3),x(c.email))},dependencies:[b,W],styles:[".navbar[_ngcontent-%COMP%]{border-bottom:solid 2px white;background:radial-gradient(circle,#555,#4b4b4b 7%,#454545 11%,#3c3c3c 17%,#353535,#2e2e2e 27%,#2b2b2b 29%,#292929,#262626 41%,#232323 46%,#1e1e1e 55% 60%,#1d1d1d 66% 69%,#1c1c1c 74%,#171717 77%,#151515 83%,#121212 88%,#0e0e0e 95%,#000)}"]});let i=t;return i})();var be=(()=>{let t=class t{constructor(){}ngOnInit(){}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p({type:t,selectors:[["app-home"]],standalone:!0,features:[g],decls:3,vars:0,template:function(e,c){e&1&&C(0,"app-nav-bar")(1,"router-outlet")(2,"app-chat")},dependencies:[J,G,X]});let i=t;return i})();export{be as HomeComponent};

import{A as u,B as v,C as S,D as g,F as b,G as y,H as w,I as l,J as p,K as h,M as I,N as R,u as m,y as f}from"./chunk-4NNJTYQ7.js";import{P as n,U as s}from"./chunk-X4LIZENW.js";import{f as d}from"./chunk-X6YOYRVK.js";var A=(()=>{let e=class e{constructor(t){this.firestore=t}insertar(t,r){try{let i=l(this.firestore,r);w(i,t)}catch(i){console.log("error StoreUsuarioService.insertar()",i)}}insertarConId(t,r,i){try{let a=h(this.firestore,i+`/${t}`);I(a,r)}catch(a){console.log("error StoreUsuarioService.insertarConId()",a)}}traerTodos(t){try{let r=l(this.firestore,t);return b(r)}catch(r){console.log("error StoreUsuarioService.traerTodos()",r)}}traerPorId(t,r){try{let i=l(this.firestore,r),a=h(i,t);return y(a)}catch(i){console.log("error StoreUsuarioService.traerPorId()",i)}}eliminar(t,r){try{let i=l(this.firestore,r),a=h(i,t);p(a)}catch(i){console.log("error StoreUsuarioService.eliminar()",i)}}modificar(t,r,i){try{let a=l(this.firestore,i),D=h(a,t);R(D,r)}catch(a){console.log("error StoreUsuarioService.modificar()",a)}}};e.\u0275fac=function(r){return new(r||e)(s(g))},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var c=class o{constructor(e,k,t){this.fechaRegistro=new Date,this.nombre=e||"",this.email=k||"",this.clave=t||""}static validarNombre(e){if(e==="")throw"El nombre no puede estar vacio";if(!/^[a-zA-Z0-9]+$/.test(e))throw"El nombre debe contener solo letras y/o n\xFAmeros"}static validarEmail(e){if(e==="")throw"El correo no puede estar vacio";if(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(e))throw"El formato del correo no es v\xE1lido"}static validarClave(e){if(e==="")throw"La contrase\xF1a no puede estar vac\xEDa";if(!/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/.test(e))throw"La contrase\xF1a debe tener al menos 6 caracteres, con numeros y letras"}setNombre(e){e.toLowerCase(),o.validarNombre(e),this.nombre=e}setEmail(e){e.toLowerCase(),o.validarEmail(e),this.email=e}setClave(e){o.validarClave(e),this.clave=e}setFechaRegistro(){this.fechaRegistro=new Date}};var L=(()=>{let e=class e{constructor(t){this.auth=t,this.estaLogeado=!1,this.initAuthStateListener()}initAuthStateListener(){u(this.auth,t=>{t?this.estaLogeado=!0:this.estaLogeado=!1})}registrar(t){return d(this,null,function*(){return f(this.auth,t.email,t.clave)})}iniciarSesion(t){return d(this,null,function*(){return v(this.auth,t.email,t.clave)})}cerrarSesion(){return d(this,null,function*(){return S(this.auth).then(()=>{this.estaLogeado=!1})})}estaSesionActiva(){return this.estaLogeado}};e.\u0275fac=function(r){return new(r||e)(s(m))},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var Z=(()=>{let e=class e{constructor(t,r){this.authService=t,this.databaseService=r,this.usuariosValidos=[new c("","juanpablo@gmail.com","123abc1"),new c("","alan@hotmail.com","123abc2"),new c("","kevin@outlook.com","123abc3")],this.bd="usuarios",this.key="usuario"}iniciarSesion(t){return localStorage.setItem(this.key,JSON.stringify({email:t.email})),this.authService.iniciarSesion(t)}registrar(t){return localStorage.setItem(this.key,JSON.stringify({email:t.email})),this.authService.registrar(t)}cerrarSesion(){return localStorage.removeItem(this.key),this.authService.cerrarSesion()}getEmail(){let t=localStorage.getItem(this.key);return t?JSON.parse(t).email:new c().email}insertar(t){return this.databaseService.insertarConId(t.email,{email:t.email,nombre:t.nombre},this.bd)}traerTodos(){return this.databaseService.traerTodos(this.bd)}traerPorId(t){return this.databaseService.traerPorId(t,this.bd)}};e.\u0275fac=function(r){return new(r||e)(s(L),s(A))},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();export{A as a,c as b,Z as c};
